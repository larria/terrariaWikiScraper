{{notice|在此页面上，术语 '''{{tr|NPC}}''' 指的是任何不由玩家控制的实体。<br/>友好的自动化角色会被称为“友方{{tr|town}} [[{{tr|NPCs}}]]”。}}
{{see also|{{tr|NPC despawning}}}}

在[[《{{tr|Terraria}}》]]中，[[{{tr|enemies}}]]、[[{{tr|critters}}]]、和其他 {{tr|NPCs}} 会在屏幕之外生成并按照它们的 [[{{tr|AI}}]] 进入屏幕区域。{{tr|NPCs}} 的生成速率、{{tr|NPC}}的最大数量、以及 {{tr|NPCs}} 的生成种类完全取决于[[一天中的时段]]、[[{{tr|biome}}]]、地面[[{{tr|blocks}}|图格的类型]]，以及其他一些因素。

注意对于 {{tr|NPC spawning}}而言，术语“友方{{tr|town NPCs}}”包括所有能入住[[{{tr|house}}]]的友好 {{tr|NPCs}}、[[{{tr|Traveling Merchant}}]]、[[{{tr|Old Man}}]]、和{{eil|town pets}}，但不包括{{eil|Skeleton Merchant}}。

== 生成限制 ==
同时可存在的 {{tr|NPCs}} 的最大数量为 200 个。{{source code ref|v=1.4.4.9|field=Terraria.Main.npc}}{{tr|world}}中存在的每个 {{tr|NPC}} 实例（包括友方 [[{{tr|NPCs}}]]）都会占用这 200 个栏位之一。

当[[{{tr|Moon Lord}}]]存在时，距离{{tr|Moon Lord's Core}}少于 281.25 格的玩家周围不会生成 {{tr|NPCs}}。{{source code ref|v=1.4.4.9|field=Terraria.NPC.MoonLordFightingDistance}}

当所有 {{tr|NPC slots}}都已被占用，且有新的 {{tr|NPC spawn}}尝试时，游戏会检查“可替换”的 {{tr|NPCs}}。如果存在可替换的 {{tr|NPC}}，该 {{tr|NPC}} 会被直接替换为将要生成的 {{tr|NPC}}。如果不存在可替换的 {{tr|NPC}}，该生成尝试会失败，不会有任何效果。{{source code ref|v=1.4.4.9|method=Terraria.NPC.NewNPC}}

以下类型的 {{tr|NPC}} 被视为可替换的：{{source code ref|v=1.4.4.9|field=Terraria.NPC.CanBeReplacedByOtherNPCs}}
* [[{{tr|Queen Bee}}]]生成的[[{{tr|Bees}}]]。
* 由[[{{tr|statues}}]]生成的 {{tr|NPCs}}。
* 通过[[{{tr|wire}}]]由[[{{tr|Bunny Cannon}}]]生成的[[{{tr|Explosive Bunny}}]]。

== {{tr|Spawn rate}} ==
<!-- 此章节中的所有信息来自电脑版 1.4.4.9 源代码；主要来自 Terraria.NPC.SpawnNPC -->
=== 基础 ===
游戏中每个{{tr|tick}}{{tick}}都会决定新的 {{tr|NPC spawns}}。这个处理中会考虑两个变量：''{{tr|spawn rate}}''和''{{tr|max spawns}}''，{{tr|spawn rate}}是 {{tr|NPC}} 每{{tr|tick}}生成的几率，而{{tr|max spawns}}限制此时刻活跃的 {{tr|NPC}} 数量。{{source code ref|v=1.4.4.9|method=Terraria.NPC.SpawnNPC}}

默认的{{tr|spawn rate}}是 1/600。{{source code ref|v=1.4.4.9|field=Terraria.NPC.defaultSpawnRate}}这意味着每个{{tr|tick}}中，有 {{chance|1/600}} 几率生成一个 {{tr|NPC}}。由于 1 秒钟有 60 个{{tr|ticks}}，所以在给定的一秒钟内有 9.52% 几率生成至少一个 {{tr|NPC}}。

<div>{{anchor|Effective NPC count}}{{anchor|effective NPC count}}{{anchor|等效 {{tr|NPC}} 数}}默认的最大生成数是 5。{{source code ref|v=1.4.4.9|field=Terraria.NPC.defaultMaxSpawns}}这意味着仅当所有当前''活跃'' {{tr|NPC}} 的 ''等效 {{tr|NPC}} 数''{{source code ref|v=1.4.4.9|field=Terraria.NPC.npcSlots|t=在官方更新日志中也被称为“{{tr|enemy slot}}”。}}之和低于 5 时，新 {{tr|NPC}} 才能生成。默认情况下，一个 {{tr|NPC}}算作 1 {{tr|NPC}}（即等效 {{tr|NPC}} 数为 1）；见下方表格获取具有非默认等效 {{tr|NPC}} 数的 {{tr|NPC}} 列表，以及被视为不活跃的 {{tr|NPC}} 列表。</div>

额外备注：{{source code ref|name=checkactive|v=1.4.4.9|method=Terraria.NPC.CheckActive / Terraria.NPC.DoesntDespawnToInactivity}}
* [[{{tr|Slime Rain}}]]期间，[[{{tr|Blue Slime}}]]和任何与其共享主 [[{{tr|NPC IDs}}]] 值（1）的{{tr|variants}}（{{#af_template:comma|
{{#af_map:{{#af_difference:{{npcinfo query|stat=type|value=1|sort=name}}|{{#af_list:Blue Slime}}}}|npc|{{eil|{{{npc}}}}}}}<!-- remove Blue Slime (already mentioned) and link each NPC with {{eil}} -->
}}）的等效 {{tr|NPC}} 数会被乘以 0.65。
* 友方{{tr|town NPCs}} 不算入等效 {{tr|NPC}} 数中。
* 玩家放出的{{tr|Critters}}不算入等效 {{tr|NPC}} 数中。
* 在[[{{tr|the Destroyer}}]]存在时，[[{{tr|Probe}}]]被视为不活跃。
* 某些[[{{tr|Old One's Army}}]]{{tr|enemies}}仅当存在[[{{tr|Mysterious Portal}}]]时被视为不活跃（见下表）。

{{flexstart|justify=space-between|style=gap:var(--layout-gap)}}
{{flexstart|item|basis=300px|grow=1}}
{| class="terraria full-width mw-collapsible mw-collapsed sortable"
|+&emsp;具有非默认等效 {{tr|NPC}} 数的 {{tr|NPCs}}&emsp;
! {{tr|NPC}} !! 等效 {{tr|NPC}} 数
{{#invoke:CargoQuery|main
| q?tables = NPCs
| q?fields = npcid, nameraw, image
| q?where = npcid IN ({{#af_join:{{npcinfo query|stat=npcSlots|valuenot=1|get=id}}|,}}) <!-- only fetch NPCs whose "npcSlots" stat is not equal to 1 -->
| q?groupBy = npcid
| q?orderBy = npcid
| template = :{{BASEPAGENAME}}/row
}}
|}
{{flexend|item}}
{{flexstart|item|basis=300px|grow=3}}
{| class="terraria full-width mw-collapsible mw-collapsed"
|+&emsp;视为不活跃的 {{tr|NPCs}}{{footnote|大部分不活跃的 {{tr|NPCs}} 是被视为另一 {{tr|NPCs}} 一部分的 {{tr|NPCs}}，例如{{nslink|Template|worms|{{tr|worms}}}}的身体和尾巴部位。否则，一只有 6–8 个{{tr|segments}}（即：单独的 {{tr|NPC}}）的[[{{tr|Giant Worm}}]]会把不相符的数量加入等效 {{tr|NPC}} 数中。}}<ref name="checkactive"/><!-- pre-1.4.0.1: Terraria.NPC.CheckActive -->&emsp;
|-
| {{options/set|item|maxsize=35x35px|wrap=y}}<!--
-->{{itemlist|width=17em|boxcss=padding:1em;<!--
From CheckActive
-->|{{item|Burning Sphere}}
|{{item|Chaos Ball}}
|{{item|Water Sphere}}<!--

From DoesntDespawnToInactivity
-->|{{item|Devourer Body}}
|{{item|Devourer Tail}}
|{{item|Giant Worm Body}}
|{{item|Giant Worm Tail}}
|{{item|Eater of Worlds Body}}
|{{item|Eater of Worlds Tail}}
|{{item|Skeletron Hand (NPC)|Skeletron Hand|note=({{eicons|1.4.0.1}})}}
|{{item|Bone Serpent Body}}
|{{item|Bone Serpent Tail}}
|{{item|Wyvern Legs}}
|{{item|Wyvern Body}}
|{{item|Wyvern Body 2}}
|{{item|Wyvern Body 3}}
|{{item|Wyvern Tail}}
|{{item|Digger Body}}
|{{item|Digger Tail}}
|{{item|World Feeder Body}}
|{{item|World Feeder Tail}}
|{{item|Wall of Flesh}}
|{{item|Wall of Flesh Eye}}
|{{item|The Hungry}}
|{{item|Leech Body}}
|{{item|Leech Tail}}
|{{item|Prime Cannon|note=({{eicons|1.4.0.1}})}}
|{{item|Prime Saw|note=({{eicons|1.4.0.1}})}}
|{{item|Prime Vice|note=({{eicons|1.4.0.1}})}}
|{{item|Prime Laser|note=({{eicons|1.4.0.1}})}}
|{{item|The Destroyer Head}}
|{{item|The Destroyer Body}}
|{{item|The Destroyer Tail}}
|{{item|Golem Head}}
|{{item|Left Golem Fist}}
|{{item|Right Golem Fist}}
|{{item|Free Golem Head|link={{tr|Golem}}}}
|{{item|Plantera's Hook}}
|{{item|Creeper}}
|{{item|Pumpking Blade|link={{tr|Pumpking}}}}
|{{item|Blue Cultist Archer}}
|{{item|White Cultist Archer}}
|{{item|Martian Saucer|note=({{eicons|1.4.0.1}})|icons=n}}
|{{item|Martian Saucer Turret|note=({{eicons|1.4.0.1}})|icons=n}}
|{{item|Martian Saucer Cannon|note=({{eicons|1.4.0.1}})|icons=n}}
|{{item|Moon Lord's Head|ext=gif}}
|{{item|Moon Lord's Hand|ext=gif}}
|{{item|Moon Lord's Core|ext=gif}}
|{{item|True Eye of Cthulhu}}
|{{item|Vortex Pillar}}
|{{item|Mysterious Tablet}}
|{{item|Lunatic Devotee}}
|{{item|Lunatic Cultist}}
|{{item|Target Dummy}}
|{{item|Dutchman Cannon|note=({{eicons|1.4.0.1}})|icons=n}}
|{{item|Stardust Pillar}}
|{{item|Nebula Pillar}}
|{{item|Solar Pillar}}
|{{item|Eternia Crystal (NPC)}}
|{{item|Mysterious Portal}}
|{{item|Betsy}}
|{{item|Dark Mage|note=(T1)}}
|{{item|Dark Mage|note=(T3)}}
}}
|-
! 仅当{{item|Mysterious Portal|icons=no}}存在时，以下 {{tr|NPCs}} 被视为不活跃
|-
|{{itemlist|width=17em|boxcss=padding:1em;
|{{item|Etherian Goblin|note=(T1)}}
|{{item|Etherian Goblin|note=(T2)|image=Etherian Goblin 2.png}}
|{{item|Etherian Goblin|note=(T3)|image=Etherian Goblin 3.png}}
|{{item|Etherian Goblin Bomber|note=(T1)}}
|{{item|Etherian Goblin Bomber|note=(T2)|image=Etherian Goblin Bomber 2.png}}
|{{item|Etherian Goblin Bomber|note=(T3)|image=Etherian Goblin Bomber 3.png}}
|{{item|Etherian Wyvern|note=(T1)}}
|{{item|Etherian Wyvern|note=(T2)|image=Etherian Wyvern 2.png}}
|{{item|Etherian Wyvern|note=(T3)|image=Etherian Wyvern 3.png}}
|{{item|Etherian Javelin Thrower|note=(T1)}}
|{{item|Etherian Javelin Thrower|note=(T2)|image=Etherian Javelin Thrower 2.png}}
|{{item|Etherian Javelin Thrower|note=(T3)|image=Etherian Javelin Thrower 3.png}}
|{{item|Old One's Skeleton|note=(T1)}}
|{{item|Old One's Skeleton|note=(T3)}}
|{{item|Wither Beast|note=(T2)}}
|{{item|Wither Beast|note=(T3)}}
|{{item|Drakin|note=(T2)}}
|{{item|Drakin|note=(T3)|image=Drakin 2.png}}
|{{item|Kobold|note=(T2)}}
|{{item|Kobold|note=(T3)}}
|{{item|Kobold Glider|note=(T2)}}
|{{item|Kobold Glider|note=(T3)}}
|{{item|Ogre|note=(T2)}}
|{{item|Ogre|note=(T3)}}
|{{item|Etherian Lightning Bug}}
}}{{options/reset|item}}
|}
{{flexend|item}}
{{flexend}}

=== 自然{{tr|spawn rate}}===
<!-- Displaying these natural spawn rates in this particular way because that's very close to the source code; hence verified (and easier to check and update)


-->{{#vardefine:sprate_dflt_prehm|600}}<!-- pre-Hardmode spawn rate default
-->{{#vardefine:maxsp_dflt_prehm|5}}<!-- pre-Hardmode max spawns default

-->{{#vardefine:sprate_limit|{{#expr:floor({{#var:sprate_dflt_prehm}}*0.1)}}}}<!--
-->{{#vardefine:maxsp_limit|{{#expr:{{#var:maxsp_dflt_prehm}}*3}}}}<!--

-->
{| class="terraria lined align-center" style="float:right; margin-left:1em;"
|+ 示例
|-
| 1/x：{{tr|spawn rate}}<br/>y：{{tr|max spawns}}
|}
{{tr|Spawn rate}}和最大生成数有着设定的数值，根据环境而不同。它们是针对下表中提到的环境而正式定义的。未列出的[[{{tr|events}}]]采用单独的机制来控制{{tr|spawn rate}}；[[{{tr|bosses}}]]通常会有较高的等效 {{tr|NPC}} 数来阻止大多数其他生成。
{{-}}<!--

-->{{options/set|item|small=y}}<!--

-->{{flexstart|style=gap:var(--layout-gap)}}<!--
-->{{flexstart|item}}
==== {{tr|Pre-Hardmode}} ====
<!--

-->{{#vardefine:sprate_dflt|{{#var:sprate_dflt_prehm}}}}<!-- spawn rate default
-->{{#vardefine:maxsp_dflt|{{#var:maxsp_dflt_prehm}}}}<!-- max spawns default

// base
-->{{#vardefine:sprate_base1|{{#var:sprate_dflt}}}}<!-- surface day
-->{{#vardefine:sprate_base2|{{#expr:floor({{#var:sprate_dflt}}*0.6)}}}}<!-- surface night
-->{{#vardefine:sprate_base3|{{#expr:floor({{#var:sprate_base2}}*0.3)}}}}<!-- surface blood moon
-->{{#vardefine:sprate_base4|{{#expr:floor({{#var:sprate_dflt}}*0.5)}}}}<!-- underground
-->{{#vardefine:sprate_base5|{{#expr:floor({{#var:sprate_dflt}}*0.4)}}}}<!-- cavern

-->{{#vardefine:maxsp_base1|{{#var:maxsp_dflt}}}}<!-- surface day
-->{{#vardefine:maxsp_base2|{{#expr:floor({{#var:maxsp_dflt}}*1.3)}}}}<!-- surface night
-->{{#vardefine:maxsp_base3|{{#expr:floor({{#var:maxsp_base2}}*1.8)}}}}<!-- surface blood moon
-->{{#vardefine:maxsp_base4|{{#expr:floor({{#var:maxsp_dflt}}*1.7)}}}}<!-- underground
-->{{#vardefine:maxsp_base5|{{#expr:floor({{#var:maxsp_dflt}}*1.9)}}}}<!-- cavern

// dungeon
-->{{#vardefine:dungeon_sprate|0.3}}<!--
-->{{#vardefine:dungeon_maxsp|1.8}}<!--

// sandstorm
-->{{#vardefine:sandst_sprate|0.9}}<!--
-->{{#vardefine:sandst_maxsp|1.2}}<!--

// underground desert
-->{{#vardefine:ugdesert_sprate|0.2}}<!--
-->{{#vardefine:ugdesert_maxsp|3}}<!--

// jungle
-->{{#vardefine:jungle-0npcs_sprate|0.4}}<!--
-->{{#vardefine:jungle-0npcs_maxsp|1.5}}<!--
-->{{#vardefine:jungle-1npcs_sprate|0.55}}<!--
-->{{#vardefine:jungle-1npcs_maxsp|1.4}}<!--
-->{{#vardefine:jungle-2npcs_sprate|0.7}}<!--
-->{{#vardefine:jungle-2npcs_maxsp|1.3}}<!--
-->{{#vardefine:jungle-3npcs_sprate|0.85}}<!--
-->{{#vardefine:jungle-3npcs_maxsp|1.2}}<!--

// evil biome (corruption/crimson)
-->{{#vardefine:evilbiome_sprate|0.65}}<!--
-->{{#vardefine:evilbiome_maxsp|1.3}}<!--

// meteor
-->{{#vardefine:meteor_sprate|0.4}}<!--
-->{{#vardefine:meteor_maxsp|1.1}}<!--

// jungle temple
-->{{#vardefine:temple_sprate|0.8}}<!--
-->{{#vardefine:temple_maxsp|1.2}}<!--

// wall of flesh
-->{{#vardefine:wof_sprate|3}}<!--
-->{{#vardefine:wof_maxsp|0.3}}<!--

// underground hallow
-->{{#vardefine:ughallow_sprate|0.65}}<!--
-->{{#vardefine:ughallow_maxsp|1.3}}<!--


-->
{| class="terraria lined align-center" id="NPC-spawning-table-1"
! rowspan=2 | {{tr|Biome}}/{{tr|Event}}/<br/>{{tr|Boss}} 战
! colspan=3 | {{tr|Surface}}
! rowspan=2 | {{tr|Underground}}
! rowspan=2 | {{tr|Cavern}}
! rowspan=2 | {{tr|Underworld}}
|-
! {{tr|Day}}
! {{tr|Night}}
! {{item|mode=image|Blood Moon|image=Bestiary Blood Moon.png}}{{footnote|name=bloodmoon|{{tr|Blood Moons}}只影响{{tr|surface}}以上的{{tr|spawn rate}}。}}
|-
| 
{{item|Forest}}

{{item|Desert}}

{{item|Snow biome}}{{footnote|name=snow|在{{tr|Snow biome}}中，[[{{tr|Rain}}|{{tr|Weather}}]]还会额外影响{{tr|spawn rate}}和{{tr|max spawns}}。}}
{{:{{BASEPAGENAME}}/print|_|1|2|3|4|5}}
| 1/{{#var:sprate_dflt}}<br/>{{#expr:{{#var:maxsp_dflt}}*2}}
|-
| {{item|Jungle|wrap=y|note=（附近没有<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs_noshadowcandle|''附近''意味着位于以玩家为中心 240×135 格的长方形内。}}}}
{{:{{BASEPAGENAME}}/print|jungle-0npcs|1|2|3|4|5|{{na}}}}
|-
| {{item|Jungle|wrap=y|note=（附近有 1 个<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs|''附近''意味着位于以玩家为中心 240×135 格的长方形内。这一效果即使在玩家拥有{{eil|Shadow Candle}}{{tr|debuff}}时也生效，其他情况下{{tr|Shadow Candle}}{{tr|debuff}}会将友方{{tr|town NPCs}} 对 {{tr|NPC spawning}}的效果无效化。}}}}
{{:{{BASEPAGENAME}}/print|jungle-1npcs|1|2|3|4|5|{{na}}}}
|-
| {{item|Jungle|wrap=y|note=（附近有 2 个<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs}}}}
{{:{{BASEPAGENAME}}/print|jungle-2npcs|1|2|3|4|5|{{na}}}}
|-
| {{item|Jungle|wrap=y|note=（附近有 3 个或以上<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs}}}}
{{:{{BASEPAGENAME}}/print|jungle-3npcs|1|2|3|4|5|{{na}}}}
|-
| 
{{item|The Corruption}}

{{item|The Crimson}}
{{:{{BASEPAGENAME}}/print|evilbiome|1|2|3|4|5|{{na}}}}
|-
| {{item|Dungeon}}
{{:{{BASEPAGENAME}}/print|dungeon|{{na}}|{{na}}|{{na}}|4|5|{{na}}}}
|-
| {{item|Meteorite (biome)|Meteorite}}{{footnote|name=meteor|仅当{{tr|the Meteorite biome}}不和{{tr|the Dungeon, the Underground Desert}}、{{tr|Sandstorm}}期间的{{tr|Desert}}、{{tr|the Jungle, or the evil biomes}}重叠时才适用。如果它和这些{{tr|biomes}}中的任何一个重叠，则使用重叠的{{tr|biome}}的{{tr|spawn rate}}和{{tr|max spawns}}。}}
{{:{{BASEPAGENAME}}/print|meteor|1|2|3|4|5|{{na}}}}
|-
| {{item|Jungle Temple}}{{footnote|name=jungletemple|更准确地来说：如果玩家站在玩家[[{{tr|Unsafe wall}}|不安全的]][[{{tr|Lihzahrd Brick Wall}}]]（[[{{tr|Wall IDs}}|{{tr|wall ID}}]] 87）之前。即{{tr|Jungle Temple}}的入口区域也适用。}}
{{:{{BASEPAGENAME}}/print|temple|1|2|3|4|5|{{na}}}}
|-
| {{item|Sandstorm|wrap=y}}
{{:{{BASEPAGENAME}}/print|sandst|1|2|3|{{na}}|{{na}}|{{na}}}}
|-
| {{item|Underground Desert}}
{{:{{BASEPAGENAME}}/print|ugdesert|1|2|3|4|5|{{na}}}}
|-
| {{item|Goblin Army|image=Bestiary Goblin Invasion.png}}
| colspan=3 | 1/20<br/>{{#expr:{{#var:maxsp_dflt_prehm}}*2}} + 每玩家 {{#expr:{{#var:maxsp_dflt_prehm}}*0.3}}
| {{na}} || {{na}} || {{na}}
|-
| {{item|Wall of Flesh|image=Map Icon Wall of Flesh.png|scale=0.7|nolink=y|[[{{tr|Wall of Flesh}}|{{tr|Wall of Flesh}}]]战斗}}
| {{na}} || {{na}} || {{na}} || {{na}} || {{na}}
| 1/{{#expr:floor({{#var:sprate_dflt}}*{{#var:wof_sprate}})}}<br/>{{#expr:floor(({{#var:maxsp_dflt}}*2)*{{#var:wof_maxsp}})}}
|-
| {{item|The Hallow|Hallow}}{{footnote|如果是人工创建的。}}
{{:{{BASEPAGENAME}}/print|_|1|2|3|4}}
| 1/{{#expr:floor({{#var:sprate_base5}}*{{#var:ughallow_sprate}})}}<br/>{{#expr:floor({{#var:maxsp_base5}}*{{#var:ughallow_maxsp}})}}
| {{na}}
|}
{{flexend|item}}<!--


// HARDMODE

-->{{flexstart|item}}
==== {{tr|Hardmode}} ====
<!--

-->{{#vardefine:sprate_dflt|{{#expr:floor({{#var:sprate_dflt_prehm}}*0.9)}}}}<!-- Hardmode spawn rate default
-->{{#vardefine:maxsp_dflt|{{#expr:{{#var:maxsp_dflt_prehm}}+1}}}}<!-- Hardmode max spawns default

// base
-->{{#vardefine:sprate_base1|{{#var:sprate_dflt}}}}<!-- surface day
-->{{#vardefine:sprate_base2|{{#expr:floor({{#var:sprate_dflt}}*0.6)}}}}<!-- surface night
-->{{#vardefine:sprate_base3|{{#expr:floor({{#var:sprate_base2}}*0.3)}}}}<!-- surface blood moon
-->{{#vardefine:sprate_base4|{{#expr:floor({{#var:sprate_dflt}}*0.2)}}}}<!-- surface solar eclipse
-->{{#vardefine:sprate_base5|{{#expr:floor({{#var:sprate_dflt}}*0.45)}}}}<!-- underground
-->{{#vardefine:sprate_base6|{{#expr:floor({{#var:sprate_dflt}}*0.4)}}}}<!-- cavern

-->{{#vardefine:maxsp_base1|{{#var:maxsp_dflt}}}}<!-- surface day
-->{{#vardefine:maxsp_base2|{{#expr:floor({{#var:maxsp_dflt}}*1.3)}}}}<!-- surface night
-->{{#vardefine:maxsp_base3|{{#expr:floor({{#var:maxsp_base2}}*1.8)}}}}<!-- surface blood moon
-->{{#vardefine:maxsp_base4|{{#expr:floor({{#var:maxsp_dflt}}*1.9)}}}}<!-- surface solar eclipse
-->{{#vardefine:maxsp_base5|{{#expr:floor({{#var:maxsp_dflt}}*1.8)}}}}<!-- underground
-->{{#vardefine:maxsp_base6|{{#expr:floor({{#var:maxsp_dflt}}*1.9)}}}}<!-- cavern

// dungeon
-->{{#vardefine:dungeon_sprate|0.3}}<!--
-->{{#vardefine:dungeon_maxsp|1.8}}<!--

// sandstorm
-->{{#vardefine:sandst_sprate|0.4}}<!--
-->{{#vardefine:sandst_maxsp|1.5}}<!--

// underground desert
-->{{#vardefine:ugdesert_sprate|0.2}}<!--
-->{{#vardefine:ugdesert_maxsp|3}}<!--

// jungle
-->{{#vardefine:jungle-0npcs_sprate|0.4}}<!--
-->{{#vardefine:jungle-0npcs_maxsp|1.5}}<!--
-->{{#vardefine:jungle-1npcs_sprate|0.55}}<!--
-->{{#vardefine:jungle-1npcs_maxsp|1.4}}<!--
-->{{#vardefine:jungle-2npcs_sprate|0.7}}<!--
-->{{#vardefine:jungle-2npcs_maxsp|1.3}}<!--
-->{{#vardefine:jungle-3npcs_sprate|0.85}}<!--
-->{{#vardefine:jungle-3npcs_maxsp|1.2}}<!--

// evil biome (corruption/crimson)
-->{{#vardefine:evilbiome_sprate|0.65}}<!--
-->{{#vardefine:evilbiome_maxsp|1.3}}<!--

// meteor
-->{{#vardefine:meteor_sprate|0.4}}<!--
-->{{#vardefine:meteor_maxsp|1.1}}<!--

// jungle temple
-->{{#vardefine:temple_sprate|0.8}}<!--
-->{{#vardefine:temple_maxsp|1.2}}<!--

// wall of flesh
-->{{#vardefine:wof_sprate|3}}<!--
-->{{#vardefine:wof_maxsp|0.3}}<!--

// underground hallow
-->{{#vardefine:ughallow_sprate|0.65}}<!--
-->{{#vardefine:ughallow_maxsp|1.3}}<!--


-->
{| class="terraria lined align-center" id="NPC-spawning-table-1"
! rowspan=2 | {{tr|Biome}}/{{tr|Event}}/<br/>{{tr|Boss}} 战
! colspan=4 | {{tr|Surface}}
! rowspan=2 | {{tr|Underground}}
! rowspan=2 | {{tr|Cavern}}
! rowspan=2 | {{tr|Underworld}}
|-
! {{tr|Day}}
! {{tr|Night}}
! {{item|mode=image|Blood Moon|image=Bestiary Blood Moon.png}}{{footnote|name=bloodmoon}}
! {{item|mode=image|Solar Eclipse|image=Bestiary Eclipse.png}}{{footnote|{{tr|Solar Eclipses}}只影响{{tr|surface}}以上的{{tr|spawn rate}}。}}
|-
| 
{{item|Forest}}

{{item|Desert}}

{{item|Snow biome}}{{footnote|name=snow}}
{{:{{BASEPAGENAME}}/print|_|1|2|3|4|5|6}}
| 1/{{#var:sprate_dflt}}<br/>{{#expr:{{#var:maxsp_dflt}}*2}}
|-
| {{item|Jungle|wrap=y|note=（附近没有<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs_noshadowcandle}}}}
{{:{{BASEPAGENAME}}/print|jungle-0npcs|1|2|3|4|5|6|{{na}}}}
|-
| {{item|Jungle|wrap=y|note=（附近有 1 个<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs}}}}
{{:{{BASEPAGENAME}}/print|jungle-1npcs|1|2|3|4|5|6|{{na}}}}
|-
| {{item|Jungle|wrap=y|note=（附近有 2 个<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs}}}}
{{:{{BASEPAGENAME}}/print|jungle-2npcs|1|2|3|4|5|6|{{na}}}}
|-
| {{item|Jungle|wrap=y|note=（附近有 3 个或以上<br/>友方{{tr|town NPCs}}时）{{footnote|name=jungle_townnpcs}}}}
{{:{{BASEPAGENAME}}/print|jungle-3npcs|1|2|3|4|5|6|{{na}}}}
|-
| 
{{item|The Corruption}}

{{item|The Crimson}}
{{:{{BASEPAGENAME}}/print|evilbiome|1|2|3|4|5|6|{{na}}}}
|-
| {{item|Dungeon}}
{{:{{BASEPAGENAME}}/print|dungeon|{{na}}|{{na}}|{{na}}|{{na}}|5|6|{{na}}}}
|-
| {{item|Meteorite (biome)|Meteorite}}{{footnote|name=meteor}}
{{:{{BASEPAGENAME}}/print|meteor|1|2|3|4|5|6|{{na}}}}
|-
| {{item|Jungle Temple}}{{footnote|name=jungletemple}}
{{:{{BASEPAGENAME}}/print|temple|1|2|3|4|5|6|{{na}}}}
|-
| {{item|Sandstorm|wrap=y}}
{{:{{BASEPAGENAME}}/print|sandst|1|2|3|4|{{na}}|{{na}}|{{na}}}}
|-
| {{item|Underground Desert}}
{{:{{BASEPAGENAME}}/print|ugdesert|1|2|3|4|5|6|{{na}}}}
|-
| 
{{item|Goblin Army|image=Bestiary Goblin Invasion.png}}

{{item|Frost Legion|image=Bestiary Frost Legion.png}}

{{item|Pirate Invasion|image=Bestiary Pirate Invasion.png}}

{{item|Martian Madness|image=Bestiary Martian Madness.png}}

{{item|Lunar Events|image=Bestiary Nebula Pillar.png|wrap=y}}
| colspan=4 | 1/20<br/>{{#expr:{{#var:maxsp_dflt_prehm}}*2}} + 每个玩家 {{#expr:{{#var:maxsp_dflt_prehm}}*0.3}}
| {{na}} || {{na}} || {{na}}
|-
| {{item|Wall of Flesh|image=Map Icon Wall of Flesh.png|scale=0.7|nolink=y|[[{{tr|Wall of Flesh}}|{{tr|Wall of Flesh}}]]战斗}}
| {{na}} || {{na}} || {{na}} || {{na}} || {{na}} || {{na}}
| 1/{{#expr:floor({{#var:sprate_dflt}}*{{#var:wof_sprate}})}}<br/>{{#expr:floor(({{#var:maxsp_dflt}}*2)*{{#var:wof_maxsp}})}}
|-
| {{item|The Hallow|Hallow}}
{{:{{BASEPAGENAME}}/print|_|1|2|3|4|5}}
| 1/{{#expr:floor({{#var:sprate_base5}}*{{#var:ughallow_sprate}})}}<br/>{{#expr:floor({{#var:maxsp_base5}}*{{#var:ughallow_maxsp}})}}
| {{na}}
|}{{flexend|item}}
{{flexend}}{{options/reset|item}}

另外，''{{tr|spawn rate}}''会受此区域中''活跃'' {{tr|NPCs}} 数量影响。活跃 {{tr|NPCs}} 越少，新的 {{tr|NPCs}} 就会越快生成：
* 如果所有活跃 {{tr|NPCs}} 的''等效 {{tr|NPC}} 数''小于''最大生成数''的 20%，{{tr|spawn rate}}的分母会乘以 0.6。
* 如果所有活跃 {{tr|NPCs}} 的等效 {{tr|NPC}} 数大于等于最大生成数的 20% 且小于 40%，{{tr|spawn rate}}的分母会乘以 0.7。
* 如果所有活跃 {{tr|NPCs}} 的等效 {{tr|NPC}} 数大于等于最大生成数的 40% 且小于 60%，{{tr|spawn rate}}的分母会乘以 0.8。
* 如果所有活跃 {{tr|NPCs}} 的等效 {{tr|NPC}} 数大于等于最大生成数的 60% 且小于 80%，{{tr|spawn rate}}的分母会乘以 0.9。
（注意所有乘积若带小数，会向下取整到最接近的整数。）

下表列出了一些此机制的例子。要按如下方式读取：如果自然{{tr|spawn rate}}和{{tr|max spawns}}（按以上描述确定）以及所有活跃 {{tr|NPCs}} 的等效 {{tr|NPC}} 数与头三列中的数值相等，那么{{tr|the spawn rate}}就会变更为最后一列的数值。
{| class="terraria lined align-center"
|+ 范例
! {{tr|Spawn rate}}
! {{tr|Max spawns}}
! 等效 {{tr|NPC}} 数
! 改变后的{{tr|spawn rate}}
|-
| 1/600 || 6 || 0.8<br/>{{note|small=y|paren=y|{{tr|max spawns}}的 13.3% }} || 1/{{#expr:floor(600*0.6)}}
|-
| 1/173 || 15 || 10<br/>{{note|small=y|paren=y|{{tr|max spawns}}的 66.7%}} || 1/{{#expr:floor(173*0.9)}}
|-
| 1/430 || 12 || 10<br/>{{note|small=y|paren=y|{{tr|max spawns}}的 83.3%}} || 1/430
|}

若玩家玩家在[[{{tr|The Corruption}}]]或[[{{tr|The Crimson}}]]或低于[[{{tr|Underground}}]]{{tr|layer}}竖直方向上的中心时，会进行第二次检查：
* 如果所有活跃 {{tr|NPCs}} 的等效 {{tr|NPC}} 数小于最大生成数的 20%，{{tr|spawn rate}}的分母会乘以 0.7。
* 如果所有活跃 {{tr|NPCs}} 的等效 {{tr|NPC}} 数大于等于最大生成数的 20% 且小于 40%，{{tr|spawn rate}}的分母会乘以 0.9。

=== 人工改变{{tr|spawn rate}} ===
部分{{tr|items}}在被使用或者放置后可以改变{{tr|spawn rate}}和{{tr|max spawns}}，如下表所示。{{source code ref|v=1.4.4.9|method=Terraria.NPC.SpawnNPC}}所有效果均是乘算，而非加算。

{| class="terraria lined sortable"
! {{tr|Item}}
! {{tr|Spawn rate}}因子{{footnote|name=round|分母的乘积如果带小数，会向下取整。}}
! 有效{{tr|spawn rate}}
! {{tr|Max spawns}}
|-
| {{item|Water Candle|note=(手持亦可)|wrap=y}}
| 1/0.75
| +33% <!-- 1/0.75 - 1 -->
| +50%
|-
| {{item|Battle Potion}}
| 1/0.5
| +100% <!-- 1/0.5 - 1 -->
| +100%
|-
| {{item|Calming Potion}}
| {{eicons|1.4.4}} 1/1.65<br/>{{eicons|1.3.0.1|invert=y}} 1/1.2
| {{eicons|1.4.4}} −39% <!-- 1/1.65 - 1 --><br/>{{eicons|1.3.0.1|invert=y}} −17% <!-- 1/1.2 - 1 -->
| {{eicons|1.4.4}} −40%<br/>{{eicons|1.3.0.1|invert=y}} −20%
|-
| {{item|Sunflower|note=(仅 {{eicons|1.3.0.1|small=y}})|wrap=y}}
| 1/1.2
| −17% <!-- 1/1.2 - 1 -->
| −20%
|-
| {{item|Peace Candle|small=y|note=(手持亦可)|wrap=y}}
| 1/1.3
| −23% <!-- 1/1.3 - 1 -->
| −30%
|-
| {{item|Invisibility Potion|note=(仅 {{eicons|1.4.0.1|small=y}})|wrap=y}}
| 1/1.2
| −17% <!-- 1/1.2 - 1 -->
| −20%
|-
| {{item|Angler armor|note=({{tr|set bonus}}；仅 {{eicons|1.4.4|small=y}})|wrap=y}}
| 1/1.3
| −23% <!-- 1/1.3 - 1 -->
| −30%
|-
| {{item|Fairy|image=Blue Fairy.gif/ Green Fairy.gif/Pink Fairy.gif|note=（120 格内有至少一个{{tr|Fairy}}）|wrap=y}}
| 1/1.2
| −17% <!-- 1/1.2 - 1 -->
| −20%
|}

这些效果不会自身叠加，也就是说，一支{{tr|Water Candle}}、一支{{tr|Peace Candle}}、或一棵{{tr|Sunflower}}和多支或多棵的效果是相同的。

在 {{eversions|1.3.0.1|invert=y}}，放置及手持的{{tr|Water Candles}}会互相堆叠。

{{tr|Water candle}}和{{tr|Peace Candles}}会互相抵消，虽然它们并不按相同的绝对值来改变{{tr|spawn rate}}。如果二者都处于活跃状态（例如：手持{{tr|Peace Candle}}同时附近放着{{tr|Water Candle}}），则不会施加任何影响。

在{{eversions|1.3.0.1|short=y}}中，有一个例外情况：在[[{{tr|Space}}]]中{{footnote|更准确地说，是在{{tr|surface}}线到世界顶部的 65% 高度以上的地方，即，和{{tr|pre-Hardmode}}中会生成{{tr|Space}}独有{{tr|enemies}}的区域是一样的。参见[[{{tr|Space|link=y}}#{{tr|Notes}}|{{tr|Space}}§{{tr|Notes}}]]。}}放置的{{tr|Water Candles}}（注意不是手持的）总是会提高{{tr|spawn rate}}，无论附近是否有{{tr|Peace Candles}}。但是它们的有效性仍取决于附近的{{tr|Peace Candles}}：

{| class="terraria lined sortable"
! {{tr|Item}}
! {{tr|Spawn rate}}因子{{footnote|name=round}}
! 有效{{tr|spawn rate}}
! {{tr|Max spawns}}
|-
| {{item|Water Candle|note=放置在{{tr|Space}}中|note2=(附近无放置或手持的{{tr|Peace Candle}})}}
| 1/0.375
| +167% <!-- 1/0.375 - 1 -->
| +50%
|-
| {{item|Water Candle|note=放置在{{tr|Space}}中|note2=(附近有放置或手持的{{tr|Peace Candle}})}}
| 1/0.5
| +100% <!-- 1/0.5 - 1 -->
| +50%
|}

<div>{{anchor|spawnrate_maxspawns_cap}}<!-- separate <div> so that the "Flash Anchored" gadget ([[MediaWiki:Gadget-flashAnchored]]) only highlights this paragraph -->
到目前为止，{{tr|spawn rate}}无法提升到大于 1/{{#var:sprate_limit}} 且{{tr|max spawns}}无法提升到大于 {{#var:maxsp_limit}}。二者都将在那个点被截断。上表中列出的{{tr|invasion events}}的{{tr|The spawn rate}}和{{tr|max spawns}}则不受此限制。{{tr|spawn rates and max spawns}}没有下限。
</div>

=== 友方{{tr|town NPCs}} 对{{tr|spawn rate}}的效果 ===
附近存在的[[{{tr|NPCs}}|友方{{tr|town NPCs}}]] 通常会降低{{tr|spawn rates and max spawns}}。{{source code ref|v=1.4.4.9|method=Terraria.NPC.SpawnNPC}}以玩家为中心 240×135 格的长方形区域内的所有友方{{tr|town NPCs}} 都会被算入。{{source code ref|v=1.4.4.9|method=Terraria.NPC.AddIntoPlayersTownNPCSlots}}

在{{eversions|1.3.0.1|short=y}}中，这一效果在[[{{tr|Underworld}}]]和[[{{tr|Graveyard}}]]中会有所调整。

当玩家位于任何[[{{tr|invasion}}]]的范围内时，这一效果（的作用）会大幅降低。

在下列任何情况下，不会有这一效果：
* 玩家拥有{{eil|Shadow Candle}}{{tr|debuff}}或手持{{tr|Shadow Candle}}。
* 玩家位于[[{{tr|the Corruption}}]]、[[{{tr|the Crimson}}]]、[[{{tr|Dungeon}}]]、或[[{{tr|Meteorite (biome)}}|{{tr|Meteorite biome}}]]中。
* 玩家在[[{{tr|Celestial Pillar}}]]或[[{{tr|Old One's Army}}]]的范围内。
* 激活了下列[[{{tr|events}}]]的任一个：[[{{tr|Blood Moon}}]]、[[{{tr|Pumpkin Moon}}]]、[[{{tr|Frost Moon}}]]、或[[{{tr|Solar Eclipse}}]]。

当附近有友方{{tr|town NPCs}} 时，玩家会被视为位于[[{{tr|safe wall}}]]前方。不过，当玩家在{{tr|Underworld}}中时不保证会有这个效果（下表中的“{{tr|safe wall}}几率”）。他们还会提高使用特殊的{{tr|critter}}生成池而非常规的生成池（常规生成池混合了{{tr|enemies and critters}}）的几率（下表中的“{{tr|critter}}几率”）。如果使用了{{tr|critter}}生成池，{{tr|max spawn}}会降低，否则{{tr|spawn rate}}会降低。

{{flexstart|style=gap:var(--layout-gap)}}
{{flexstart|item}}
{| class="terraria align-center"
|+ {{eicons|1.3.0.1}} {{tr|world}}中的任何位置<br/><small>在{{tr|Underworld}}以上，且不在{{tr|Graveyard}}</small>
! 附近的友方{{tr|town NPCs}} 的数量
! {{tr|Safe wall}}几率
! {{tr|Critter}}几率
! {{tr|Critter}}{{tr|max spawns}}
! {{tr|Spawn rate}}{{footnote|name=round}}{{footnote|name=enemyonly|仅当不使用{{tr|critter}}生成池时使用此值。}}
! 等效{{tr|spawn rate}}{{footnote|name=effectiverate}}
|-
| 1
| 100%
| {{chance|1/3}}
| 60%
| {{chance|1/2}}
| {{chance|1/3}} {{footnote|有 {{chance|1/3}} 的几率完全不生成{{tr|enemies}}，有 {{chance|2/3}} 几率以 1/2 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{2}{3} * \frac{1}{2}= \frac{1}{3}</math>。}}
|-
| 2
| 100%
| {{chance|2/3}}
| 60%
| {{chance|1/3}}
| {{chance|1/9}} {{footnote|有 {{chance|2/3}} 的几率完全不生成{{tr|enemies}}，有 {{chance|1/3}} 几率以 1/3 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{1}{3} * \frac{1}{3}= \frac{1}{9}</math>。}}
|-
| ≥3
| 100%
| 100% {{footnote|{{eil|Expert Mode}}中为{{chance|29/30}}}}
| 60%
| 1 {{footnote|此处{{tr|The spawn rate}}未变化，但由于总是生成{{tr|critters}}，此值完全不相关。}}
| 0 {{footnote|name=nospawns|完全不会有{{tr|enemies}}生成}}
|}
{{flexend|item}}
{{flexstart|item}}
{| class="terraria align-center"
|+ {{eicons|1.3.0.1}} 在{{tr|Underworld}}中
! 附近的友方{{tr|town NPCs}} 的数量
! {{tr|Safe wall}}几率
! {{tr|Critter}}几率
! {{tr|Critter}}{{tr|max spawns}}
! {{tr|Spawn rate}}{{footnote|name=round}}{{footnote|name=enemyonly}}
! 等效{{tr|spawn rate}}{{footnote|name=effectiverate|此处只统计{{tr|enemy}}生成，不统计{{tr|critter}}生成，因此这一值表明了{{tr|town}}的“安全”度。}}
|-
| 1
| {{chance|1/2}}
| {{chance|1/10}}
| 50%
| {{chance|1/1.25}}
| {{chance|18/25}} {{footnote|有 {{chance|1/10}} 的几率完全不生成{{tr|enemies}}，有 {{chance|9/10}} 几率以 4/5 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{9}{10} * \frac{4}{5}= \frac{18}{25}</math>。}}
|-
| 2
| {{chance|3/4}}
| {{chance|1/5}}
| 50%
| {{chance|1/1.5}}
| {{chance|8/15}} {{footnote|有 {{chance|1/5}} 的几率完全不生成{{tr|enemies}}，有 {{chance|4/5}} 几率以 2/3 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{4}{5} * \frac{2}{3}= \frac{8}{15}</math>。}}
|-
| ≥3
| {{chance|9/10}}
| {{chance|1/3}}
| 50%
| {{chance|1/2}}
| {{chance|1/3}} {{footnote|有 {{chance|1/3}} 的几率完全不生成{{tr|enemies}}，有 {{chance|2/3}} 几率以 1/2 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{2}{3} * \frac{1}{2}= \frac{1}{3}</math>。}}
|}
{{flexend|item}}
{{flexstart|item}}
{| class="terraria align-center"
|+ 在{{eil|Graveyard|nl=y}}中
! 附近的友方{{tr|town NPCs}} 的数量
! {{tr|Safe wall}}几率
! {{tr|Critter}}几率
! {{tr|Critter}}{{tr|max spawns}}
! {{tr|Spawn rate}}{{footnote|name=round}}{{footnote|无论是否使用{{tr|critter}}生成池都会使用此值。}}
! 等效{{tr|spawn rate}}{{footnote|name=effectiverate}}
|-
| 1
| 100%
| {{chance|1/9}}
| 60%
| {{chance|1/1.66}}
| {{chance|8/15}} {{footnote|有 {{chance|1/9}} 的几率完全不生成{{tr|enemies}}，有 {{chance|8/9}} 几率以 3/5 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{8}{9} * \frac{3}{5}= \frac{8}{15}</math>。}}
|-
| 2
| 100%
| {{chance|1/6}}
| 60%
| {{chance|1/2.33}}
| {{chance|5/14}} {{footnote|有 {{chance|1/6}} 的几率完全不生成{{tr|enemies}}，有 {{chance|5/6}} 几率以 3/7 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{5}{6} * \frac{3}{7}= \frac{5}{14}</math>。}}
|-
| ≥3
| 100%
| {{chance|1/3}}
| 60%
| {{chance|1/3}}
| {{chance|2/9}} {{footnote|有 {{chance|1/3}} 的几率完全不生成{{tr|enemies}}，有 {{chance|2/3}} 几率以 1/3 的{{tr|spawn rate}}尝试。因此，等效{{tr|spawn rate}}是 <math display=inline>\frac{2}{3} * \frac{1}{3}= \frac{2}{9}</math>。}}
|}
{{flexend|item}}
{{flexstart|item}}
{| class="terraria align-center"
|+ {{eicons|1.3.0.1|invert=y}} {{tr|world}}中的任何位置
! 附近的友方{{tr|town NPCs}} 的数量
! {{tr|Spawn rate}}因子{{footnote|name=round}}
! 有效{{tr|spawn rate}}
! {{tr|Max spawns}}
|-
| 1
| 1/1.2{{footnote|有 {{chance|1/3}} 的几率使分母被乘以 2。因此，{{tr|spawn rate}}因子是 <math display=inline>\frac{1}{3} * \frac{1}{2}</math>（分母被乘以 2）加上 <math display=inline>\frac{2}{3} * \frac{1}{1}</math>（分母不变）。这等同于 <math display=inline>\frac{1}{3}*\frac{1}{2} + \frac{2}{3} = \frac{5}{6}</math> 或 <math display=inline>1/\frac{6}{5} = 1/1.2</math>。}}
| −17% <!-- 1/1.2 - 1 -->
| −27%{{footnote|有 {{chance|2/3}} 的几率使{{tr|max spawns}}被乘以 0.6。因此，{{tr|max spawns}}因子是 <math display=inline>\frac{2}{3} * \frac{6}{10}</math>（{{tr|max spawns}}被乘以 0.6）加上 <math display=inline>\frac{1}{3} * 1</math> （{{tr|max spawns}}不变）。这等同于 <math display=inline>\frac{2}{3}*\frac{6}{10} + \frac{1}{3} = \frac{11}{15}</math>，以百分比表示即为 <math display=inline>\frac{11}{15} - 1 = -\frac{4}{15} = -0.266\cdots \approx -27 \%</math>。}}
|-
| 2
| 1/1.8{{footnote|有 {{chance|2/3}} 的几率使分母被乘以 3。因此，{{tr|spawn rate}}因子是 <math display=inline>\frac{2}{3} * \frac{1}{3}</math>（分母被乘以 3）加上 <math display=inline>\frac{1}{3} * \frac{1}{1}</math>（分母不变）。这等同于 <math display=inline>\frac{2}{3}*\frac{1}{3} + \frac{1}{3} = \frac{5}{9}</math> 或 <math display=inline>1/\frac{9}{5} = 1/1.8</math>。}}
| −44% <!-- 1/1.8 - 1 -->
| −13%{{footnote|有 {{chance|1/3}} 的几率使{{tr|max spawns}}被乘以 0.6。因此，{{tr|max spawns}}因子是 <math display=inline>\frac{1}{3} * \frac{6}{10}</math>（{{tr|max spawns}}被乘以 0.6）加上 <math display=inline>\frac{2}{3} * 1</math>（{{tr|max spawns}}不变）。这等同于 <math display=inline>\frac{1}{3}*\frac{6}{10} + \frac{2}{3} = \frac{13}{15}</math>，以百分比表示即为 <math display=inline>\frac{13}{15} - 1 = -\frac{2}{15} = -0.133\cdots \approx -13 \%</math>。}}
|-
| ≥3
| {{na}}{{footnote|name=nospawns}}
| {{na}}{{footnote|name=nospawns}}
| −40%
|}
{{flexend|item}}
{{flexend}}

当附近有 3 个或更多友方{{tr|town NPCs}} 存在时，会产生{{eil|town}}{{tr|mini-biome}}并且不会有{{tr|enemies}}生成。这仅对{{tr|the Underworld and Graveyards}}以外的区域有效且仅对{{tr|Classic world}}有效——在{{eil|Expert mode}}中，{{tr|enemy}}依然有每{{tr|tick}} {{chance|1/30}} 的几率会生成。来自{{tr|Events}}的{{tr|Enemies}}，以及 {{tr|bosses}}（及其仆从）不受此限制约束。

=== {{tr|Journey Mode}} ===
在{{eil|Journey Mode}}中，可以手工调整{{tr|Spawn rate}}，从 0×（禁止生成）到 10× 正常速率。即使将{{tr|spawn rate}}设为 0×， 也依然会召唤[[{{tr|bosses}}]]、挖掉[[{{tr|Tombstones}}]]依然会导致[[{{tr|Ghost (enemy)}}|{{tr|Ghosts}}]]生成，并且某些[[{{tr|Celestial Pillars}}|{{tr|Celestial Pillar}}]]{{tr|enemies}}也能生成。

== 生成位置 ==
游戏中的每个玩家都会生成自己的 {{tr|NPCs}}。如果两个玩家在同一个区域内，{{tr|NPCs}} 会以两倍于仅一个玩家时的速度出现。{{tr|Max Spawns}}的限制依然有用，这意味着即使有 2 个玩家在同一个地点，也无法在这地点附近聚集起 30 个普通 {{tr|NPCs}}。注意部分 {{tr|NPCs}} 算作大于或小于 1 个 {{tr|NPC}}。见[[#等效 {{tr|NPC}} 数|上方]]获取详细信息。

=== 选择一个地方来生成 {{tr|NPC}} ===
[[File:Terraria Spawn Area.png|right|400px|thumb|生成区域展示。{{verify|Whether this still applies to current version has to be checked. This image was last updated in 2014.}}]] [[File:NPC spawning overview.png|right|400px|thumb|生成范围和条件。]]

当游戏确认要生成一个 {{tr|NPC}} 时，首先会在玩家（更具体地说，是包含玩家碰撞框左上角的那个{{tr|the tile}}）周围的长方形区域内随机选择一个{{tr|tile}}。能选择的距离玩家最远的距离是西面 84 格、东面 83 格、向上 46 格、向下 45 格。{{source code ref|v=1.4.4.9|method=Terraria.NPC.SpawnNPC}}

使用某些物品会导致 {{tr|NPCs}} 能在比正常更远的地方生成。当装备着[[{{tr|Rifle Scope}}]]或[[{{tr|Sniper Scope}}]]时，仅当玩家选择了与此兼容的{{tr|gun}}时才会如此，但无论玩家是否缩小了视野均如此。

{|class="terraria align-center"
|-
!rowspan=2 | {{tr|Items}}
!colspan=2 | 生成范围
!colspan=2 | 安全范围
|-
! 水平
! 垂直
! 水平
! 垂直
|-
| 普通
| 84
| 46
| 62
| 34
|-
| [[{{tr|Rifle Scope}}]]（{{tr|or its upgrades}}）
| 114
| 62
| 92
| 50
|-
| [[{{tr|Binoculars}}]]
| 124
| 68
| 102
| 56
|-
| [[{{tr|Sniper Rifle}}]]
| 124
| 68
| 102
| 56
|-
| [[{{tr|Sniper Rifle}}]]加上[[{{tr|Rifle Scope}}]]（{{tr|or its upgrades}}）
| 132
| 72
| 110
| 60
|}

{{note|注：如果正在使用{{tr|the Depth Meter}}、{{tr|Compass}}、或类似的东西，每格等于 2 英尺，所以将所有尺寸翻倍即可得到以英尺为单位的距离}}

然后，游戏会检查所选{{tr|tile}}是否是有效生成位置：

如果所选{{tr|tile}}是实心{{tr|tile}}（包括所有实心[[{{tr|blocks}}]]、[[{{tr|platforms}}]]、[[{{tr|Planter Boxes}}]]、和[[{{tr|Bubble}}]]）{{source code ref|v=1.4.4.9|method=Terraria.Tile.nactive|field= Terraria.Main.tileSolid}}，或者它有阻止{{tr|enemies}}生成的[[{{tr|safe wall}}]]，此次尝试被视为无效。被致动的{{tr|Tiles}}不视为实心。

<div>{{anchor|Space}}{{anchor|{{tr|Space}}}}游戏然后会检查此次是否是 [[{{tr|Space}}]] {{tr|NPC spawning}}尝试。所选{{tr|tile}}需要位于{{tr|Space}}，>65% 高度（且在{{tr|pre-Hardmode}}之前不在{{tr|world}}水平中心的 10% 范围内），在{{tr|Hardmode}}下则是 >55% 高度（''见[[{{tr|Space|link=y}}#{{tr|Notes}}|{{tr|Space}} § {{tr|Notes}}]]获取细节''）。如果不是{{tr|Space NPC spawning}}尝试，游戏会检查所选{{tr|tiles}}正下方以寻找实心{{tr|tiles}}。如果生成范围内没有实心{{tr|tiles}}（最多到玩家下方 45 格）或者该{{tr|block}}位于安全区域内（从包含玩家的{{tr|hitbox}}左上角的那格起，向西 62 格、向东 61 格、向上 35 格、以及向下 34 格），此次尝试被视为无效。注意此阶段中，即使所选{{tr|tile}}位于安全区域内，{{tr|Space NPC spawning}}尝试也不会被视为无效。</div>

然后，游戏会检查所选{{tr|tile}}上方 2×3 的区域以确认是否有用于生成的足够空间。如果 6 格中的任意一格位于真正的[[世界边界]]以外、是{{tr|solid block}}、或包含[[{{tr|lava}}]]，则该尝试被视为无效。注意这一区域位于所选{{tr|tile}}偏向左侧一格，如图所示。

[[File:Checking the spawning space.png|thumb|游戏检查所选{{tr|tile}}（绿色）上方 2×3 区域（红色），从左上到右下的楼梯会阻止 {{tr|NPC spawning}}，但从右上到左下的楼梯不会。]]

上述流程会最多会重复 50 次，以找到有效的生成{{tr|tile}}。不过，该尝试仍然会由于下列原因失败（下列情况下不会继续重试）：
* 所选的{{tr|tile}}空间必须''完全位于''以每个玩家{{tr|hitbox}}为中心 2088×1172 像素的长方形之外。{{footnote|如果玩家没有骑乘[[{{tr|mount}}]]，这个长方形的上边缘是在前面提到的左上角图格之上 34 + 3/16 格处，这意味着若玩家站立于{{tr|half blocks}}上，{{tr|NPCs}} 可以在玩家上方正好 35 格处的地面上生成，但若玩家站立于完整的{{tr|blocks}}上则不行。}}
* 当玩家位于[[{{tr|Dungeon}}]]中时，所选{{tr|tile}}必须是上方有{{tr|wall}}的[[{{tr|Dungeon Brick}}]]（任何{{tr|wall}}都会满足要求，即使是{{tr|safe walls}}）。{{footnote|这用于阻止{{tr|Dungeon NPCs}} 在{{tr|Dungeon}}外生成。}}
* 当所选{{tr|tile}}正上方两格包含[[{{tr|liquid}}]]，该{{tr|liquid}}必须是[[{{tr|water}}]]。{{footnote|这意味着没有 {{tr|NPCs}} 会在超过 1 格深的[[{{tr|Shimmer}}]]或[[{{tr|honey}}]]中生成（任何在{{tr|lava}}中的尝试已会在先前的阶段被视为无效）。}}
* 当所选{{tr|tile}}是[[{{tr|Mowed grass}}]]或[[{{tr|Mowed Hallowed grass}}]]时，如果以下{{tr|events}}均未激活，则有 {{chance|1/10}} 几率生成失败：[[{{tr|Blood Moon}}]]、[[{{tr|Solar Eclipse}}]]、[[{{tr|Pumpkin Moon}}]]、[[{{tr|Frost Moon}}]]、[[{{tr|Slime Rain}}]]、和任何[[{{tr|invasion}}]]。

=== 选择生成的 {{tr|NPC}} 的类型 ===
在选择有效的{{tr|tile}}后，游戏会决定生成的 {{tr|NPC}} 类型。

当选择 {{tr|NPCs}} 生成时，若玩家静止不动{{footnote|技术上来说，水平和垂直方向的移动速度低于 {{mph|0.05 pixels|mode=tiles_text}}（0.05 像素/{{tr|tick}}）。}}至少 {{duration|300ticks}}{{source code ref|v=1.4.4.9|method=Terraria.NPC.AFKTimeNeededForNoWorms|property=Terraria.Player.IsStandingStillForSpecialEffects}}或位于任何[[{{tr|safe wall}}]]前方，则能够穿过{{tr|solid blocks}}的{{tr|enemies}}（如[[{{tr|Wyvern}}]]、[[{{tr|Chaos Elemental}}]]、[[{{tr|Floaty Gross}}]]，等等）不会被选择。不过，这一影响会被{{eil|Shadow Candle}}完全消除。

总体来说，生成的 {{tr|NPC}} 的类型会取决于很多因素，包括但不限于：
* 一天中的时段
* 天气（例如，[[{{tr|Angry Nimbus}}]]和[[{{tr|Ice Golem}}]]要求是[[{{tr|Rain}}|{{tr|Rain}}/{{tr|Blizzard}}]]）
* 深度
* 东西方距离（[[{{tr|Ocean}}]] {{tr|NPCs}}、[[{{tr|Martian Probe}}]]、[[{{tr|Goblin Scout}}]]等）
* 玩家的当前[[{{tr|biome}}]]（[[{{tr|The Corruption}}|{{tr|Corruption}}]]、[[{{tr|Meteor}}]]、[[{{tr|Jungle}}]]等，对于大多数{{tr|biome-specific flying NPC}}）
* {{tr|NPC}} 生成时所在的{{tr|Tile}}（[[{{tr|Jungle grass}}]]、[[{{tr|Ebonstone Block}}]]、[[{{tr|Marble Block}}]]等，对于大多数{{tr|biome-specific}}地面 {{tr|NPC}}）
* 玩家背后的{{tr|wall}}（[[{{tr|Lihzahrd Brick Wall}}]]、[[{{tr|Dungeon Brick Wall}}]]等）
* {{tr|NPC}} 的生成位置背后的{{tr|wall}}（{{tr|Dungeon Brick Wall}}的{{tr|variants}}）
* 特定{{tr|events}}（[[{{tr|Blood Moon}}]]、[[{{tr|Solar Eclipse}}]]、入侵[[{{tr|events}}]]、等等）
* 随机性

==== 细节 ====
{{exclusive|1.4.4|section=y}}
{{stub}}<!--
Adding info about remixWorld
Complete the details about each enemies' spawning condition
-->
下方细节描述了没有 <code>remixWorld</code> 属性{{source code ref|v=1.4.4.9|field=Terraria.Main.remixWorld}}的{{tr|worlds}}中 {{tr|NPC spawning}}的行为（即下方的部分信息不适用于 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}）。

首先，游戏会检查用于生成的特定环境。这通常会检查所选{{tr|tile}}或其附近其他{{tr|tile}}的类型（即{{tr|tile}}的 [[{{tr|Tile IDs}}|{{tr|ID}}]]），以及玩家的位置。检查会包含以下内容：
* 决定[[{{tr|Living Tree}}]] {{tr|NPCs}} 是否能生成。
** 会检查所选{{tr|tile}}和其上方的两格。如果其中至少有一格包含不安全的[[{{tr|Living Wood Wall}}]]，{{tr|Living Tree NPCs}} 就能生成。
* 决定[[{{tr|Marble Cave}}]]或[[{{tr|Granite Cave}}]] {{tr|NPCs}} 是否能生成。检查会在下列任意检查找到一个[[{{tr|Marble Block}}]]或[[{{tr|Granite Block}}]]时结束。
{{collapse top|显示{{tr|Marble and Granite}}的检查}}
# 检查所选{{tr|tile}}。
# 检查玩家脚下的{{tr|tile}}。
# 检查以所选{{tr|tile}}为中心的矩形区域中的{{tr|tile}}，从上到下、从左到右。
#* 矩形区域的大小为 41×41 格至 61×61 格。循环的步长可以是 1、2、或 3。
# 检查以玩家脚下的{{tr|tile}}为中心的矩形区域中的{{tr|tile}}，从上到下、从左到右。
#* 矩形区域的大小为 61×61 格至 121×121 格。循环的步长可以是 3、4、5、或 6。
* 如果这些矩形区域部分处于真正的[[世界边界]]以外，区域会缩小以使其完全处于{{tr|world}}中。
{{collapse bottom}}
* 决定[[{{tr|Spider Nest}}]] {{tr|NPCs}} 是否能生成。
{{collapse top|显示{{tr|Spider Nests}}的条件}}
# 所选{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}。在 [[{{tr|The Constant}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中，{{tr|tile}}只需要位于[[{{tr|Underworld}}]]{{tr|layer}}以上。
# 玩家不在[[{{tr|Dungeon}}]]{{tr|biome}}中。
# 只会进行以下检查中的一个以在区域内找到至少一个不安全的[[{{tr|Spider Wall}}]]。如果区域部分处于真正[[世界边界]]以外，则不会进行检查，{{tr|Spider Nest NPCs}} 将无法生成。
#* {{chance|1/3}} 几率：检查以所选{{tr|tile}}为中心 11×11 格至 29×29 格的矩形区域中的{{tr|tile}}。
#* {{chance|2/3}} 几率：检查包含玩家{{tr|hitbox}}的左上角的{{tr|tile}}。
{{collapse bottom}}
* 决定[[{{tr|Underground Desert}}]] {{tr|NPCs}} 是否能生成（''见[[{{tr|Underground Desert|link=y}}#生成机制|{{tr|Underground Desert}} § 生成机制]]获取细节''）。
* 决定[[{{tr|Windy Day}}]] {{tr|NPCs}} 是否能生成。
** {{tr|The wind}}必须从生成位置吹向玩家位置。
* 决定[[{{tr|Ocean}}]] {{tr|NPCs}} 是否能生成。
{{collapse top|显示{{tr|Ocean}}的条件}}
* 所选{{tr|tile}}需要满足以下条件之一：
** 所选{{tr|tile}}是任何{{tr|variant}}的[[{{tr|Sand Block}}]]，距离左或右真正[[世界边界]]不超过 250 格，且位于{{tr|cavern layer}}以上。
** 所选{{tr|tile}}是常规的{{tr|Sand Block}}，距离左或右真正世界边界不超过 380 格，且高于[[{{tr|underground}}]]{{tr|layer}}垂直中线以上 40 格。
{{collapse bottom}}

然后，游戏会决定生成{{tr|tile}}。检查起始于所选{{tr|tile}}，逐步向下，直到找到一个非{{tr|platform}}、{{tr|Planter Box}}、或[[{{tr|Conveyor Belt}}]]的实心{{tr|tile}}，最多至所选{{tr|tile}}下方 30 格。{{source code ref|v=1.4.4.9|method=Terraria.NPC.SpawnNPC_TryFindingProperGroundTileType / Terraria.NPC.IsValidSpawningGroundTile}}如果没有找到这类{{tr|tile}}，所选{{tr|tile}}将被用作生成{{tr|tile}}。生成{{tr|tile}}的类型随后会用于 {{tr|NPC spawning}}。

最后，生成的 {{tr|NPC}} 类型会根据玩家的当前环境和生成{{tr|tile}}决定。下方为 {{tr|NPC}} 类型和条件表格。注意特定的 {{tr|NPCs}} 的生成可能会有其他限制。
{{options/set|item|mode=table|icons=no|maxsize=30px}}
{| class="terraria lined mw-collapsible mw-collapsed" 
! colspan=2 | {{tr|NPC}} 来源{{footnote|生成的 {{tr|NPC}} 会是在此环境中出现的 {{tr|NPCs}} 之一，或提及的 {{tr|NPCs}} 之一。}}
! 条件
|-
| {{item|Solar Pillar|image=Bestiary Solar Pillar.png}}
| rowspan=4 |
* 玩家位于对应的[[{{tr|Celestial Pillar}}]]区域附近。
|-
| {{item|Vortex Pillar|image=Bestiary Vortex Pillar.png}}
|-
| {{item|Nebula Pillar|image=Bestiary Nebula Pillar.png}}
|-
| {{item|Stardust Pillar|image=Bestiary Stardust Pillar.png}}
|-
| {{item|Space|image=Bestiary Sky.png}}
|
* 生成尝试为[[#{{tr|Space}}|{{tr|Space NPC spawning}}尝试]]。
|-
| {{item|Goblin Army|image=Bestiary Goblin Invasion.png}}
| rowspan=4 |
* 玩家位于对应[[{{tr|invasion}}]]的区域内。
|-
| {{item|Frost Legion|image=Bestiary Frost Legion.png}}
|-
| {{item|Pirate Invasion|image=Bestiary Pirate Invasion.png}}
|-
| {{item|Martian Madness|image=Bestiary Martian Madness.png}}
|-
| {{item|Living Tree|image=Living Wood.png/Gnome.png}}
|
* {{tr|Living Tree NPCs}} 可生成（见[[#细节|上方]]）。
|-
| {{item|Unconscious Man}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 不存在[[{{tr|Tavernkeep}}]]和{{tr|Unconscious Man}}。
|-
| {{item|Spider Nest|image=Bestiary Spider Nest.png}}
|
* 生成{{tr|tile}}有不安全的[[{{tr|Spider Wall}}]]。
* {{tr|Spider Nest NPCs}} 可生成（见[[#细节|上方]]）。
|-
| {{item|Underground Desert|image=Bestiary Underground Desert.png}}
|
* {{tr|Underground Desert NPCs}} 可生成（见[[{{tr|Underground Desert|link=y}}#生成机制|{{tr|Underground Desert}} § 生成机制]]）。
|-
| {{item|Arapaima}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 玩家位于[[{{tr|Jungle}}]]中。
|-
| {{item|Blood Jelly}}
| rowspan=2 |
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 玩家位于[[{{tr|the Crimson}}]]中。
|-
| {{item|Blood Feeder}}
|-
| {{item|Ocean|Ocean water|image=Bestiary Ocean.png/Water.png}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 未使用[[#友方{{tr|town NPCs}} 对{{tr|spawn rate}}的效果|特殊的{{tr|critter}}生成池]]，或不存在[[{{tr|Angler}}]]和{{tr|Sleeping Angler}}。
* {{tr|Ocean NPCs}} 可生成（见[[#细节|上方]]）。
|-
| {{item|Sleeping Angler|note2=（{{tr|Sand Block}}上的额外生成）}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 不存在{{tr|The Angler and Sleeping Angler}}。
* 生成{{tr|tile}}是任何{{tr|variant}}的[[{{tr|Sand Block}}]]。
* 生成{{tr|tile}}距离左或右真正[[世界边界]]不超过 380 格。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中不需要此条件。
|-
| {{item|Jungle|Jungle water|image=Bestiary The Jungle.png/Water.png|note2=（也包括[[{{tr|Piranha}}]]和[[{{tr|Angler Fish}}]]）}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 未使用[[#友方{{tr|town NPCs}} 对{{tr|spawn rate}}的效果|特殊的{{tr|critter}}生成池]]。
* 生成{{tr|tile}}是[[{{tr|Jungle grass}}]]，或位于[[{{tr|cavern}}]]{{tr|layer}}及以下。
|-
| {{item|Underground|Underground water|image=Bestiary Underground.png/Water.png|note2=（[[{{tr|Jellyfish}}]]）}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 未使用[[#友方{{tr|town NPCs}} 对{{tr|spawn rate}}的效果|特殊的{{tr|critter}}生成池]]。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下。
|-
| {{item|Surface|Surface water|image=Bestiary Surface.png/Water.png}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 生成{{tr|tile}}不位于左或右真正[[世界边界]]的 250 格以内，或者位于{{tr|surface}}以上 50 格的下方。
|-
| {{item|Bound Goblin}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 已击败[[{{tr|Goblin Army}}]]。
* 不存在[[{{tr|Goblin Tinkerer}}]]和{{tr|Bound Goblin}}。
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}及以下，且距离底部真正[[世界边界]]大于 210 格（[[{{tr|Underworld}}]]{{tr|layer}}以上 20 格）。
|-
| {{item|Bound Wizard}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 不存在[[{{tr|Wizard}}]]和{{tr|Bound Wizard}}。
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}及以下，且距离底部真正[[世界边界]]大于 210 格（[[{{tr|Underworld}}]]{{tr|layer}}以上 20 格）。
|-
| {{item|Old Shaking Chest}}
|
* 已击败[[{{tr|Skeletron}}]]。
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 不存在[[{{tr|Elder Slime}}]]。
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}及以下，且距离底部真正[[世界边界]]大于 210 格（[[{{tr|Underworld}}]]{{tr|layer}}以上 20 格）。
|-
| {{item|Critters|image=Bunny.png/Bird.png}}
|
* 使用[[#友方{{tr|town NPCs}} 对{{tr|spawn rate}}的效果|特殊的{{tr|critter}}生成池]]。
|-
| {{item|Dungeon|image=Bestiary The Dungeon.png}}
|
* 玩家位于{{tr|Dungeon}}中。
|-
| {{item|Meteorite (biome)|Meteorite biome|image=Bestiary Meteor.png}}
|
* 玩家位于{{tr|Meteorite biome}}。
|-
| {{item|Frost Moon|image=Bestiary Frost Moon.png}}
| rowspan=2 |
* [[{{tr|night}}]]期间。
* 激活对应[[{{tr|event}}]]。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中不需要此条件。
|-
| {{item|Pumpkin Moon|image=Bestiary Pumpkin Moon.png}}
|-
| {{item|Solar Eclipse|image=Bestiary Eclipse.png}}
|
* [[{{tr|day}}]]期间。
* {{tr|Solar Eclipse}}激活。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中此条件改为位于[[{{tr|cavern}}]]{{tr|layer}}及以下。
|-
| {{item|Fairies|Underground Fairies|image=Bestiary Underground.png/Blue Fairy.gif}}
|
* {{tr|world}}中至少存在一个[[{{tr|Fallen Log}}]]。
* 不存在{{tr|underground Fairies}}。
* 生成{{tr|tile}}位于[[{{tr|underground}}]]{{tr|layer}}垂直中线以下，且距离底部真正[[世界边界]]大于 300 格（[[{{tr|Underworld}}]]{{tr|layer}}以上 110 格）。
|-
| {{item|Gnome|note2=（[[{{tr|Living Tree}}]]外）}}
|
* 在 [[{{tr|don't dig up}}]] 和 [[{{tr|get fixed boi}}]] {{tr|world}}中，{{tr|Gnomes}}不能通过此方式生成。
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* [[{{tr|night}}]]期间，或生成{{tr|tile}}具有任何{{tr|background wall}}。
* 不在[[{{tr|Solar Eclipse}}]]或[[{{tr|Blood Moon}}]]期间。
* 已存在的{{tr|Gnomes}}不超过 2 个。
* 玩家站在不安全的[[{{tr|Living Wood Wall}}]]前。
|-
| {{item|Gnome|note2=（[[{{tr|unsafe wall}}]]前）}}
|
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 玩家不位于[[{{tr|the Corruption}}]]或[[{{tr|the Crimson}}]]。
* 不在[[{{tr|Solar Eclipse}}]]或[[{{tr|Blood Moon}}]]期间。
* 已存在的{{tr|Gnomes}}不超过 2 个。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]线附近。{{footnote|实际高度需求为 80% {{tr|surface}}高度至 110% {{tr|surface}}高度。}}在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中此条件改为位于[[{{tr|cavern}}]]{{tr|layer}}高度和距离底部真正[[世界边界]] 350 格（[[{{tr|Underworld}}]]{{tr|layer}}以上 160 格）之间。
* 生成{{tr|tile}}具有下列{{tr|background walls}}之一：{{options/reset|item}}<!--
-->{{options/set|item|maxsize=40px|icons=no}}
{{itemlist|class=terraria|width=14em
|{{wall|id=63|showid=no}}
|{{wall|id=2|showid=no}}
|{{wall|id=196|showid=no}}
|{{wall|id=197|showid=no}}
|{{wall|id=198|showid=no}}
|{{wall|id=199|showid=no}}
}}{{options/reset|item}}<!--
-->{{options/set|item|mode=table|icons=no|maxsize=30px}}
|-
| {{item|Fungo Fish}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}上方的{{tr|Water}}超过 1 格深。
* 生成{{tr|tile}}是[[{{tr|Mushroom grass}}]]。
|-
| {{item|Glowing Mushroom biome|Surface Glowing Mushroom|image=Bestiary Surface Mushroom.png}}
|
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。
* 生成{{tr|tile}}是[[{{tr|Mushroom grass}}]]。
|-
| {{item|Glowing Mushroom biome|Underground Glowing Mushroom|image=Bestiary Underground Mushroom.png}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下。
* 生成{{tr|tile}}是[[{{tr|Mushroom grass}}]]。
|-
| {{item|Corruption|note2=（{{tr|Worm enemies}}）|image=Bestiary The Corruption.png}}
|
* 玩家位于[[{{tr|the Corruption}}]]中。
* 玩家未站在[[{{tr|safe wall}}]]前。
|-
| {{item|Mimics|note2=（[[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]]）|image=Gold Chest Mimic.png/Ice Mimic.png}}
|
* [[{{tr|pre-Hardmode}}]]期间。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下。
|-
| {{item|Mimics|note2=（{{tr|Underground}}）|image=Gold Chest Mimic.png/Hallowed Mimic.png/Jungle Mimic.png}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下。
|-
| {{item|Mimics|{{tr|Wooden Mimic}}|image=Chest Mimic.png}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}有不安全的[[{{tr|Dirt Wall}}]]。
|-
| {{item|Wraith}}
|
* [[{{tr|Hardmode}}]]期间，在[[{{tr|night}}]]。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。
|-
| {{item|Hoppin' Jack}}
|
* [[{{tr|Hardmode}}]]期间、[[{{tr|Halloween}}]]期间、在[[{{tr|night}}]]。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。
|-
| {{item|Doctor Bones}}
|
* 在[[{{tr|night}}]]。
* 生成{{tr|tile}}是[[{{tr|Jungle grass}}]]。
|-
| {{item|Lac Beetle}}
|
* 生成{{tr|tile}}是[[{{tr|Jungle grass}}]]。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下。
|-
| {{item|Worm}}
| rowspan = 4 |
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下，且距离底部真正[[世界边界]]大于 210 格（[[{{tr|Underworld}}]]{{tr|layer}}以上 20 格）。
* 玩家不位于下列{{tr|biomes}}中：[[{{tr|Ice biome}}]]、[[{{tr|the Crimson}}]]、[[{{tr|the Corruption}}]]、[[{{tr|Jungle}}]]、[[{{tr|the Hallow}}]]。
|-
| {{item|Gold Worm}}
|-
| {{item|Mouse}}
|-
| {{item|Gold Mouse}}
|-
| {{item|Snail}}
|
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以下，且高于[[{{tr|cavern}}]]{{tr|layer}}及以下区域的垂直中线
* 玩家不位于下列{{tr|biomes}}中：[[{{tr|Ice biome}}]]、[[{{tr|the Crimson}}]]、[[{{tr|the Corruption}}]]、[[{{tr|the Hallow}}]]。
|-
| {{item|Jungle|Jungle birds|image=Scarlet Macaw.png/Yellow Cockatiel.png/Toucan.png}}
|
* 在[[{{tr|day}}]]。
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。
* 玩家位于[[{{tr|Jungle}}]]中，且不位于[[{{tr|the Crimson}}]]或[[{{tr|the Corruption}}]]。
|-
| {{item|Jungle|Jungle frogs|image=Frog.png/Gold Frog.png/Mystic Frog.png}}
|
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。
* 玩家位于[[{{tr|Jungle}}]]中，且不位于[[{{tr|the Crimson}}]]或[[{{tr|the Corruption}}]]。
|-
| {{item|Hive|Hive block|note2=（[[{{tr|Hornet}}]]、[[{{tr|Moss Hornet}}]]）}}
|
* 生成{{tr|tile}}是[[{{tr|Hive|link=y}}|{{tr|Hive}}]]。
|-
| {{item|Jungle|Hardmode Jungle|image=Bestiary The Jungle.png}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}是[[{{tr|Jungle grass}}]]。
|-
| {{item|Jungle Temple|image=Bestiary The Temple.png}}
|
* 玩家位于不安全的[[{{tr|Lihzahrd Brick Wall}}]]前。
* 生成{{tr|tile}}是[[{{tr|Lihzahrd Brick}}]]或[[{{tr|Wooden Spike}}]]。在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中不需要此条件。
|-
| {{item|Hive Wall|note2=（[[{{tr|Hornet}}]]、[[{{tr|Moss Hornet}}]]）}}
|
* 生成{{tr|tile}}上方的{{tr|tile}}有不安全的[[{{tr|Hive Wall}}]]。
|-
| {{item|Underground Jungle|image=Bestiary Underground Jungle.png}}
|
* 生成{{tr|tile}}是[[{{tr|Jungle grass}}]]。
* 生成{{tr|tile}}位于[[{{tr|underground}}]]{{tr|layer}}的垂直中线以下。
** 在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中，没有垂直需求，但 {{tr|NPCs}} 在[[{{tr|cavern layer}}]]的生成几率更高。
|-
| {{item|Jungle Bat}}
| rowspan=2 |
* 生成{{tr|tile}}是[[{{tr|Jungle grass}}]]。
|-
| {{item|Snatcher}}
|-
| {{item|Sandstorm|image=Bestiary Sandstorm.png}}
|
* {{tr|Sandstorm}}激活。
* 玩家在[[{{tr|Desert}}]]中，且不在左或右真正[[世界边界]]的 380 格以内。
* 玩家位于[[{{tr|surface}}]]以上。在 [[{{tr|Don't dig up}}]] 和 [[{{tr|Get fixed boi}}]] {{tr|worlds}}中此条件改为位于[[{{tr|cavern}}]]{{tr|layer}}及以下。
* 生成{{tr|tile}}是任何{{tr|variant}}的[[{{tr|Sand Block}}]]。
* 生成{{tr|tile}}通过了{{tr|the Sand Block}}数量检查。''见[[{{tr|Sandstorm|link=y}}#{{tr|Notes}}|{{tr|Sandstorm}} § {{tr|Notes}}]]获取细节。''
|-
| {{item|Mummy}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}是常规[[{{tr|Sand Block}}]]。
|-
| {{item|Dark Mummy}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}是[[{{tr|Ebonsand Block}}]]。
|-
| {{item|Blood Mummy}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}是[[{{tr|Crimsand Block}}]]。
|-
| {{item|Light Mummy}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}是[[{{tr|Pearlsand Block}}]]。
|-
| {{item|The Hallow|image=Bestiary The Hallow.png}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 生成{{tr|tile}}高于[[{{tr|cavern}}]]{{tr|layer}}。
* 生成{{tr|tile}}是[[{{tr|Pearlsand Block}}]]、[[{{tr|Pearlstone Block}}]]、[[{{tr|Hallowed grass}}]]、或[[{{tr|Pink Ice Block}}]]。
|-
| {{item|Enchanted Sword (NPC)|Enchanted Sword}}
|
* [[{{tr|Hardmode}}]]期间。
* 玩家未站在[[{{tr|safe wall}}]]前。
* 生成{{tr|tile}}上方的{{tr|Water}}不超过 1 格深。
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}及以下。
* 生成{{tr|tile}}是[[{{tr|Pearlsand Block}}]]、[[{{tr|Pearlstone Block}}]]、[[{{tr|Hallowed grass}}]]、或[[{{tr|Pink Ice Block}}]]。
|-
| {{item|The Crimson|Any Crimson biome|image=Bestiary The Crimson.png/Bestiary Underground Crimson.png/Bestiary Crimson Desert.png}}
|
* 玩家位于[[{{tr|the Crimson}}]]，且生成{{tr|tile}}是[[{{tr|Crimtane Ore}}]]，''或''（不考虑玩家位置）生成{{tr|tile}}是[[{{tr|Crimsand Block}}]]、[[{{tr|Crimstone Block}}]]、[[{{tr|Crimson grass}}]]、[[{{tr|Red Ice Block}}]]、或[[{{tr|Crimson Jungle grass}}]]。
|-
| {{item|The Corruption|Any Corruption biome|image=Bestiary The Corruption.png/Bestiary Underground Corruption.png/Bestiary Corrupt Desert.png}}
|
* 玩家位于[[{{tr|the Corruption}}]]，且生成{{tr|tile}}是[[{{tr|Demonite Ore}}]]，''或''（不考虑玩家位置）生成{{tr|tile}}是[[{{tr|Ebonsand Block}}]]、[[{{tr|Ebonstone Block}}]]、[[{{tr|Corrupt grass}}]]、[[{{tr|Purple Ice Block}}]]、或[[{{tr|Corrupt Jungle grass}}]]。
|-
| {{item|Surface|Surface biomes|image=Bestiary Surface.png}}
|<!--Includes the spawning of NPCs from many biomes' surface part: regular Forest, Graveyard, Snow, Hallow...
This part can be expanded, TBD
-->
* 生成{{tr|tile}}位于[[{{tr|surface}}]]{{tr|layer}}以上。
|-
| {{item|Underground|image=Bestiary Underground.png}}
|
* 生成{{tr|tile}}位于[[{{tr|underground}}]]{{tr|layer}}。
|-
| {{item|Ice Slime}}
|<!-- This entry is splitted from the underground part. -->
* 生成{{tr|tile}}位于[[{{tr|underground}}]]{{tr|layer}}。
* 玩家位于[[{{tr|Ice biome}}]]。
* 生成{{tr|tile}}是[[{{tr|Snow Block}}]]或常规[[{{tr|Ice Block}}]]。
|-
| {{item|The Underworld|image=Bestiary The Underworld.png}}
|
* 生成{{tr|tile}}距离底部真正[[世界边界]]不超过 190 格（位于{{tr|Underworld}}{{tr|layer}}内）。
|-
| {{item|Cavern|image=Bestiary Caverns.png}}
|
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}。
|-
| {{item|Rock Golem}}
|<!-- Entries below are splitted from the cavern part. -->
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}。
* 生成{{tr|tile}}是常规[[{{tr|Stone Block}}]]，或长在{{tr|Stone Block}}上的[[{{tr|moss}}]]。
* 玩家不位于[[{{tr|Ice biome}}]]。
* 生成{{tr|tile}}上方 4 格处的 3×1（宽×高）区域未被实心{{tr|tiles}}占据。
|-
| {{item|Cyan Beetle}}
|
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}。
* 玩家位于[[{{tr|Ice biome}}]]。
|-
| {{item|Cochineal Beetle}}
|
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}。
* 玩家不位于[[{{tr|Ice biome}}]]。
|-
| {{item|Chaos Elemental}}
|
* [[{{tr|Hardmode}}]]期间。
* 生成{{tr|tile}}位于[[{{tr|cavern}}]]{{tr|layer}}。
* 生成{{tr|tile}}是[[{{tr|Pearlsand Block}}]]、[[{{tr|Pearlstone Block}}]]、或[[{{tr|Pink Ice Block}}]]。
* 玩家未站在[[{{tr|safe wall}}]]前或静止不动。<!--
-- TBD -->
|}{{options/reset|item}}

== 备注 ==
* 当站在世界的左或右可见[[世界边界]]时，{{tr|NPC}} 可以在屏幕内生成，只要它们距离玩家至少 62 格远即可。

== 历史 ==
{{history|Desktop 1.4.4|
** 降低了在[[{{tr|Jungle}}]]中，附近有友方{{tr|town NPCs}} 时的天然{{tr|spawn rates and max spawns}}。
** 为[[{{tr|Jungle Temple}}]]添加了单独的{{tr|spawn rate and max spawns}}值。
** [[{{tr|Calming Potion}}]]的{{tr|spawn rate}}降低由 23% 提升至 39%，{{tr|max spawns}}降低由 30% 提升至 40%。<!-- 代码中的改动：spawnRate 因子由 1.3 变为 1.65，maxSpawns 因子由 0.7 变为 0.6 -->}}
{{history|Desktop 1.4.0.1|
** 将以下 {{tr|NPCs}} 添加到从不被视为活跃的 {{tr|NPCs}} 中：{{tr|Skeletron Hand, Prime Cannon, Prime Saw, Prime Vice, Prime Laser, Martian Saucer, Martian Saucer Turret, Martian Saucer Cannon, and Dutchman Cannon}}。
** 提高了[[{{tr|Dungeon}}]]中的自然{{tr|spawn rates and max spawns}}<!-- 代码中的改动： spawnRate 因子由 0.4 变为 0.3，maxSpawns 因子由 1.7 变为 1.8（困难模式之前和困难模式均如此）-->
*** {{tr|Underground layer}}中的{{tr|spawn rate}}由 1/120（{{tr|pre-Hardmode}}）和 1/97（{{tr|Hardmode}}）提高到 1/90（{{tr|pre-Hardmode}}）和 1/72（{{tr|Hardmode}}）。
*** {{tr|Cavern layer}}中的{{tr|spawn rate}}由 1/96（{{tr|pre-Hardmode}}）和 1/86（{{tr|Hardmode}}）提高到 1/72（{{tr|pre-Hardmode}}）和 1/64（{{tr|Hardmode}}）。
*** {{tr|the Underground layer}}中{{tr|pre-Hardmode}}的{{tr|max spawns}}由 13 提升至 14。
** 提高了[[{{tr|Underground Desert}}]]中的自然{{tr|spawn rates and max spawns}}：<!-- 代码中的改动： spawnRate 因子由 0.3 变为 0.2（仅困难模式之前；困难模式不变，仍为 0.2)，maxSpawns 因子由 2 变为 3（困难模式之前和困难模式均如此）-->
*** {{tr|pre-Hardmode}}{{tr|the surface}}在白天的{{tr|spawn rate}}由 1/180 提高至 1/120。
*** {{tr|pre-Hardmode}}{{tr|the surface}}在{{tr|night}}的{{tr|spawn rate}}由 1/108 提高至 1/72。
*** {{tr|the Underground layer}}中{{tr|pre-Hardmode}}的{{tr|spawn rate}}由 1/90 提升至 1/60。
*** {{tr|the Cavern layer}}中{{tr|pre-Hardmode}}的{{tr|spawn rate}}由 1/72 提升至 1/60。
*** {{tr|surface}}的{{tr|max spawns}}提升至 15。旧的{{tr|max spawns}}在白天是 10（{{tr|pre-Hardmode}}）/ 12（{{tr|Hardmode}}），{{tr|night}}是 12（{{tr|pre-Hardmode}}）/ 14（{{tr|Hardmode}}）。在{{tr|the Underground Desert}}的{{tr|Max spawns}}现在在任何时间和所有条件下都是 15。
** [[{{tr|Invisibility Potion}}]]现在使{{tr|spawn rate}}降低 17%，使{{tr|max spawns}}降低 20%。}}
{{history|Desktop 1.3.0.1|
** 更改了附近的友方{{tr|town NPCs}} 对{{tr|spawn rates and max spawns}}的效果：
*** 在[[{{tr|Underworld}}]]中的效果更低。
*** 附近有 1 个友方{{tr|town NPC}} 现在将{{tr|spawn rate}}降低 33% 而非 17%，将{{tr|max spawns}}降低 13% 而非 27%。<!-- 代码中的改动：将 maxSpawns 降低（2/3 变为 1/3）和 spawnRate 增加（1/3 变为 2/3）的几率互换了  -->
*** 附近有 2 个友方{{tr|town NPC}} 现在将{{tr|spawn rates}}降低 22% 而非 44%，将{{tr|max spawns}}降低 27% 而非 13%。<!-- 代码中的改动：将 maxSpawns 降低（1/3 变为 2/3）和 spawnRate 增加（2/3 变为 1/3）的几率互换了  -->
** 放置的和手持的[[{{tr|Water Candle}}]]不再叠加。
** 为放置在{{tr|Space}}的{{tr|Water Candles}}添加了额外的{{tr|spawn rate}}。
** {{tr|Calming Potion}}的{{tr|spawn rate}}降低由 17% 提升至 23%，{{tr|max spawns}}降低由 20% 提升至 30%。<!-- 代码中的改动：spawnRate 因子由 1.2 变为 1.3，maxSpawns 因子由 0.8 变为 0.7 -->
** [[{{tr|Sunflower}}]]现在提供{{tr|Happy! buff}}，会将{{tr|spawn rate}}降低 17%，{{tr|max spawns}}降低 20%。}}
{{history|Desktop 1.2.4|修正了当{{tr|moon}}[[{{tr|event}}]]{{note|small=y|paren=y|译注：原文为 moon events，指{{tr|Blood Moon}}、{{tr|Pumpkin Moon}}、{{tr|Frost Moon}}等}}发生时地下的{{tr|spawn rate}}也会升高的 {{tr|Bug}}。}}
{{history|Desktop 1.2.3|修正了{{tr|spawn rate}}在任何位置都比预期的要高，而非当在{{tr|dirt layer}}中点以下时如此的 {{tr|bug}}。}}
{{history|Desktop 1.0.5|{{tr|Enemies}}现在根据 {{tr|AI}} 样式和强度占据不同数量的栏位。这将有助于平衡同一时间生成过多强大{{tr|enemy}}的状况，例如[[{{tr|Fire Imp}}]]和[[{{tr|Bone Serpent}}]]。}}
{{history|Desktop-Release|{{tr|Introduced.}}}}

== 参考 ==
{{reflist}}
{{footnotelist|refs=
<!-- these two footnotes are used by the NPC_spawning/print subpage -->
{{footnote|name=spawnratecap|注意{{tr|spawn rate}}的上限为 1/{{#var:sprate_limit}}；见[[#spawnrate_maxspawns_cap|下方]]。}}
{{footnote|name=maxspawnscap|注意{{tr|max spawns}}被限制在 {{#var:maxsp_limit}}；见[[#spawnrate_maxspawns_cap|下方]]。}}
}}

{{Game mechanics}}
<noinclude>
[[Category:NPC]]

{{language info|en=NPC spawning}}
</noinclude>